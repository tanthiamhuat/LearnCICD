{
	"name": "dataflow_WuhanCombined",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "SqlServerTable",
						"type": "DatasetReference"
					},
					"name": "SQLServerSource"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "AzureStorageAccount",
						"type": "DatasetReference"
					},
					"name": "StorageAccountSink"
				}
			],
			"transformations": [
				{
					"name": "DateTime"
				},
				{
					"name": "FilterByDateTime"
				}
			],
			"script": "parameters{\n\ttableName as string ('dbo.combined'),\n\tDateTimeStart as timestamp (toTimestamp('2021-12-07 00:00:00','yyyy-MM-dd HH:mm:ss')),\n\tDateTimeEnd as timestamp (toTimestamp('2021-12-07 23:59:59','yyyy-MM-dd HH:mm:ss')),\n\tfileName as string ('WuhanCombined')\n}\nsource(output(\n\t\tTimestamp as long,\n\t\tex1_head_pressure as string,\n\t\tex1_head_temp as string,\n\t\tex1_melt_temp as string,\n\t\tex1_recipe_name as string,\n\t\tex1_recipe_no as string,\n\t\tex1_roll_torque as string,\n\t\tex1_RunningRecipe as string,\n\t\tex1_screw_current as string,\n\t\tex1_screw_speed as string,\n\t\tex1_screw_temp as string,\n\t\tex1_zone_1_temp as string,\n\t\tex1_zone_2_temp as string,\n\t\tex1_zone_3_temp as string,\n\t\tex2_head_pressure as string,\n\t\tex2_head_temp as string,\n\t\tex2_melt_temp as string,\n\t\tex2_recipe_name as string,\n\t\tex2_recipe_no as string,\n\t\tex2_roll_torque as string,\n\t\tex2_RunningRecipe as string,\n\t\tex2_screw_current as string,\n\t\tex2_screw_speed as string,\n\t\tex2_screw_temp as string,\n\t\tex2_zone_1_temp as string,\n\t\tex2_zone_2_temp as string,\n\t\tex3_head_pressure as string,\n\t\tex3_head_temp as string,\n\t\tex3_melt_temp as string,\n\t\tex3_recipe_name as string,\n\t\tex3_recipe_no as string,\n\t\tex3_roll_torque as string,\n\t\tex3_RunningRecipe as string,\n\t\tex3_screw_current as string,\n\t\tex3_screw_speed as string,\n\t\tex3_screw_temp as string,\n\t\tex3_zone_1_temp as string,\n\t\tex3_zone_2_temp as string,\n\t\tex4_head_pressure as string,\n\t\tex4_head_temp as string,\n\t\tex4_melt_temp as string,\n\t\tex4_recipe_name as string,\n\t\tex4_recipe_no as string,\n\t\tex4_roll_torque as string,\n\t\tex4_RunningRecipe as string,\n\t\tex4_screw_current as string,\n\t\tex4_screw_speed as string,\n\t\tex4_screw_temp as string,\n\t\tex4_zone_1_temp as string,\n\t\tex4_zone_2_temp as string,\n\t\tex4_zone_3_temp as string,\n\t\tex5_head_pressure as string,\n\t\tex5_head_temp as string,\n\t\tex5_melt_temp as string,\n\t\tex5_recipe_name as string,\n\t\tex5_recipe_no as string,\n\t\tex5_RunningRecipe as string,\n\t\tex5_screw_current as string,\n\t\tex5_screw_speed as string,\n\t\tex5_screw_temp as string,\n\t\tex5_zone_1_temp as string,\n\t\tex5_zone_2_temp as string,\n\t\tex5_zone_3_temp as string,\n\t\tex5_zone_4_temp as string,\n\t\toven_profile_temperature as string,\n\t\toven_real_speed as string,\n\t\toven_real_temperature1 as string,\n\t\toven_real_temperature2 as string,\n\t\toven_speed_set as string,\n\t\toven_temp1_set as string,\n\t\toven_temp2_set as string,\n\t\toven_turbine_status as string,\n\t\tcal0_CaliperPresent as string,\n\t\tcal0_DesignValue as string,\n\t\tcal0_Found as string,\n\t\tcal0_HighErrorTolerance as string,\n\t\tcal0_HighWarningTolerance as string,\n\t\tcal0_LowErrorTolerance as string,\n\t\tcal0_LowWarningTolerance as string,\n\t\tcal0_MeasuredValue as string,\n\t\tcal0_Name as string,\n\t\tcal0_PriorityCode as string,\n\t\tcal0_StatusCode as string,\n\t\tcal1_CaliperPresent as string,\n\t\tcal1_DesignValue as string,\n\t\tcal1_Found as string,\n\t\tcal1_HighErrorTolerance as string,\n\t\tcal1_HighWarningTolerance as string,\n\t\tcal1_LowErrorTolerance as string,\n\t\tcal1_LowWarningTolerance as string,\n\t\tcal1_MeasuredValue as string,\n\t\tcal1_Name as string,\n\t\tcal1_PriorityCode as string,\n\t\tcal1_StatusCode as string,\n\t\tcal2_CaliperPresent as string,\n\t\tcal2_DesignValue as string,\n\t\tcal2_Found as string,\n\t\tcal2_HighErrorTolerance as string,\n\t\tcal2_HighWarningTolerance as string,\n\t\tcal2_LowErrorTolerance as string,\n\t\tcal2_LowWarningTolerance as string,\n\t\tcal2_MeasuredValue as string,\n\t\tcal2_Name as string,\n\t\tcal2_PriorityCode as string,\n\t\tcal2_StatusCode as string,\n\t\tcal3_CaliperPresent as string,\n\t\tcal3_DesignValue as string,\n\t\tcal3_Found as string,\n\t\tcal3_HighErrorTolerance as string,\n\t\tcal3_HighWarningTolerance as string,\n\t\tcal3_LowErrorTolerance as string,\n\t\tcal3_LowWarningTolerance as string,\n\t\tcal3_MeasuredValue as string,\n\t\tcal3_Name as string,\n\t\tcal3_PriorityCode as string,\n\t\tcal3_StatusCode as string,\n\t\tcal4_CaliperPresent as string,\n\t\tcal4_DesignValue as string,\n\t\tcal4_Found as string,\n\t\tcal4_HighErrorTolerance as string,\n\t\tcal4_HighWarningTolerance as string,\n\t\tcal4_LowErrorTolerance as string,\n\t\tcal4_LowWarningTolerance as string,\n\t\tcal4_MeasuredValue as string,\n\t\tcal4_Name as string,\n\t\tcal4_PriorityCode as string,\n\t\tcal4_StatusCode as string,\n\t\tcal5_CaliperPresent as string,\n\t\tcal5_DesignValue as string,\n\t\tcal5_Found as string,\n\t\tcal5_HighErrorTolerance as string,\n\t\tcal5_HighWarningTolerance as string,\n\t\tcal5_LowErrorTolerance as string,\n\t\tcal5_LowWarningTolerance as string,\n\t\tcal5_MeasuredValue as string,\n\t\tcal5_Name as string,\n\t\tcal5_PriorityCode as string,\n\t\tcal5_StatusCode as string,\n\t\tcal6_CaliperPresent as string,\n\t\tcal6_DesignValue as string,\n\t\tcal6_Found as string,\n\t\tcal6_HighErrorTolerance as string,\n\t\tcal6_HighWarningTolerance as string,\n\t\tcal6_LowErrorTolerance as string,\n\t\tcal6_LowWarningTolerance as string,\n\t\tcal6_MeasuredValue as string,\n\t\tcal6_Name as string,\n\t\tcal6_PriorityCode as string,\n\t\tcal6_StatusCode as string,\n\t\tcal7_CaliperPresent as string,\n\t\tcal7_DesignValue as string,\n\t\tcal7_Found as string,\n\t\tcal7_HighErrorTolerance as string,\n\t\tcal7_HighWarningTolerance as string,\n\t\tcal7_LowErrorTolerance as string,\n\t\tcal7_LowWarningTolerance as string,\n\t\tcal7_MeasuredValue as string,\n\t\tcal7_Name as string,\n\t\tcal7_PriorityCode as string,\n\t\tcal7_StatusCode as string,\n\t\tcal8_CaliperPresent as string,\n\t\tcal8_DesignValue as string,\n\t\tcal8_Found as string,\n\t\tcal8_HighErrorTolerance as string,\n\t\tcal8_HighWarningTolerance as string,\n\t\tcal8_LowErrorTolerance as string,\n\t\tcal8_LowWarningTolerance as string,\n\t\tcal8_MeasuredValue as string,\n\t\tcal8_Name as string,\n\t\tcal8_PriorityCode as string,\n\t\tcal8_StatusCode as string,\n\t\tcal9_CaliperPresent as string,\n\t\tcal9_DesignValue as string,\n\t\tcal9_Found as string,\n\t\tcal9_HighErrorTolerance as string,\n\t\tcal9_HighWarningTolerance as string,\n\t\tcal9_LowErrorTolerance as string,\n\t\tcal9_LowWarningTolerance as string,\n\t\tcal9_MeasuredValue as string,\n\t\tcal9_Name as string,\n\t\tcal9_PriorityCode as string,\n\t\tcal9_StatusCode as string,\n\t\tE1_DesignValue as string,\n\t\tE1_Found as string,\n\t\tE1_HighErrorTolerance as string,\n\t\tE1_HighWarningTolerance as string,\n\t\tE1_LowErrorTolerance as string,\n\t\tE1_LowWarningTolerance as string,\n\t\tE1_MeasuredValue as string,\n\t\tE1_PriorityCode as string,\n\t\tE1_StatusCode as string,\n\t\tE2_DesignValue as string,\n\t\tE2_Found as string,\n\t\tE2_HighErrorTolerance as string,\n\t\tE2_HighWarningTolerance as string,\n\t\tE2_LowErrorTolerance as string,\n\t\tE2_LowWarningTolerance as string,\n\t\tE2_MeasuredValue as string,\n\t\tE2_PriorityCode as string,\n\t\tE2_StatusCode as string,\n\t\tE3_DesignValue as string,\n\t\tE3_Found as string,\n\t\tE3_HighErrorTolerance as string,\n\t\tE3_HighWarningTolerance as string,\n\t\tE3_LowErrorTolerance as string,\n\t\tE3_LowWarningTolerance as string,\n\t\tE3_MeasuredValue as string,\n\t\tE3_PriorityCode as string,\n\t\tE3_StatusCode as string,\n\t\tE4_DesignValue as string,\n\t\tE4_Found as string,\n\t\tE4_HighErrorTolerance as string,\n\t\tE4_HighWarningTolerance as string,\n\t\tE4_LowErrorTolerance as string,\n\t\tE4_LowWarningTolerance as string,\n\t\tE4_MeasuredValue as string,\n\t\tE4_PriorityCode as string,\n\t\tE4_StatusCode as string,\n\t\tDataPresent as string,\n\t\tDesign_StatusCode as string,\n\t\tIOFields_Design_Filename as string,\n\t\tIOFields_Outputs_Disabled as string,\n\t\tIOFields_Outputs_Paused as string,\n\t\tHeartbeat as string,\n\t\t{1#catepillar_belt_speed} as string,\n\t\t{1#catepillar_distance_between_belts} as string,\n\t\t{1#catepillar_set_point_local} as string,\n\t\t{2#HotAir_Zone_5_temperature} as string,\n\t\t{2#HotAir_Zone_6_temperature} as string,\n\t\t{TSM_GAS-Temperature_1} as string,\n\t\t{TSM_GAS-Temperature_2} as string,\n\t\t{TSM_GAS-Temperature_3} as string,\n\t\t{TSM_GAS-Temperature_4} as string,\n\t\tTSM_UHF_Magnetron1 as string,\n\t\tTSM_UHF_Magnetron2 as string,\n\t\tTSM_UHF_Magnetron3 as string,\n\t\tTSM_UHF_Magnetron4 as string,\n\t\tTSM_UHF_Magnetron5 as string,\n\t\tTSM_UHF_Magnetron6 as string,\n\t\t{1#HotAir_Zon1_1_temperature} as string,\n\t\t{1#HotAir_Zon1_2_temperature} as string,\n\t\t{1#HotAir_Zon1_3_temperature} as string,\n\t\t{1#HotAir_Zon1_4_temperature} as string,\n\t\t{1#catepillar_motor_charge} as string,\n\t\t{2#HotAir_Zone_1_temperature} as string,\n\t\t{2#HotAir_Zone_2_temperature} as string,\n\t\t{2#HotAir_Zone_3_temperature} as string,\n\t\t{2#HotAir_Zone_4_temperature} as string,\n\t\tTSM_GAS_Belt_Real_Speed as string,\n\t\tTSM_UHF_Belt_Real_Speed as string,\n\t\tTSM_UHF_Burner_Temperature1 as string,\n\t\tTSM_UHF_Burner_Temperature2 as string,\n\t\tHead_Zone1_temp as string,\n\t\tHead_Zone2_temp as string,\n\t\tHead_Zone3_temp as string\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tisolationLevel: 'READ_UNCOMMITTED',\n\tformat: 'table') ~> SQLServerSource\nSQLServerSource derive(DateTime1 = addDays(toDate('1970-01-01'), (toInteger(Timestamp)+8*3600)/86400),\n\t\tDateTime2 = toTimestamp(add(toInteger(toString(byName('Timestamp')))*1000l,8*3600*1000),'yyyy-MM-dd HH:mm:ss')\r\n/*toTimestamp(add(toInteger(toString('1638892795'))*1000l,8*3600*1000),'yyyy-MM-dd HH:mm:ss')*/\r\n) ~> DateTime\nDateTime filter(DateTime2 >= $DateTimeStart && DateTime2 <=$DateTimeEnd) ~> FilterByDateTime\nFilterByDateTime sink(allowSchemaDrift: true,\n\tvalidateSchema: false,\n\tinput(\n\t\tDateTime as string,\n\t\tex2_head_temp as string,\n\t\tex3_head_temp as string,\n\t\tex4_head_temp as string,\n\t\tex2_head_pressure as string,\n\t\tex3_head_pressure as string,\n\t\tex4_head_pressure as string,\n\t\tHead_Zone1_temp as string,\n\t\tHead_Zone2_temp as string,\n\t\tHead_Zone3_temp as string,\n\t\tIOFields_Design_Filename as string\n\t),\n\tumask: 0022,\n\tpreCommands: [],\n\tpostCommands: [],\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true,\n\tsaveOrder: 1,\n\tmapColumn(\n\t\tDateTime = DateTime2,\n\t\tex2_head_temp,\n\t\tex3_head_temp\n\t)) ~> StorageAccountSink"
		}
	}
}