{
	"name": "dataflow1",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "SqlServerTable",
						"type": "DatasetReference"
					},
					"name": "source1"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "AzureDataExplorerTable",
						"type": "DatasetReference"
					},
					"name": "sink1"
				}
			],
			"transformations": [],
			"script": "parameters{\n\tstart as string,\n\tend as string\n}\nsource(allowSchemaDrift: true,\n\tvalidateSchema: false,\n\tisolationLevel: 'READ_UNCOMMITTED',\n\tquery: (toString('select * from dbo.combined where Timestamp > DATEDIFF(second,convert(datetime, '+'\\''+'1970-01-01T00:00:00Z'+'\\''+',127), convert(datetime, '+'\\''+$start+'\\''+' ,127))-8*3600 and Timestamp<=DATEDIFF(second,convert(datetime, '+'\\''+'1970-01-01T00:00:00Z'+'\\''+',127), convert(datetime, '+'\\''+$end+'\\''+',127))-8*3600 ')),\n\tformat: 'query') ~> source1\nsource1 sink(allowSchemaDrift: true,\n\tvalidateSchema: false,\n\trecreate:true,\n\tformat: 'table',\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true,\n\tmapColumn(\n\t\tcatepillar_belt_speed = {1#catepillar_belt_speed},\n\t\tcatepillar_distance_between_belts = {1#catepillar_distance_between_belts},\n\t\tcatepillar_set_point_local = {1#catepillar_set_point_local},\n\t\tHotAir_Zone_5_temperature = {2#HotAir_Zone_5_temperature},\n\t\tHotAir_Zone_6_temperature = {2#HotAir_Zone_6_temperature},\n\t\tHotAir_Zon1_1_temperature = {1#HotAir_Zon1_1_temperature},\n\t\tHotAir_Zon1_2_temperature = {1#HotAir_Zon1_2_temperature},\n\t\tHotAir_Zon1_3_temperature = {1#HotAir_Zon1_3_temperature},\n\t\tHotAir_Zon1_4_temperature = {1#HotAir_Zon1_4_temperature},\n\t\tcatepillar_motor_charge = {1#catepillar_motor_charge},\n\t\tHotAir_Zone_1_temperature = {2#HotAir_Zone_1_temperature},\n\t\tHotAir_Zone_2_temperature = {2#HotAir_Zone_2_temperature},\n\t\tHotAir_Zone_3_temperature = {2#HotAir_Zone_3_temperature},\n\t\tHotAir_Zone_4_temperature = {2#HotAir_Zone_4_temperature},\n\t\teach(match(true()))\n\t)) ~> sink1"
		}
	}
}